var coords=[],markers=[],map=null;function redrawMarkers(){const n=$("#category-sonst").attr("data-active")=="true",s=$("#category-all").attr("data-active")=="true";for(const e in markers)map.removeLayer(markers[e]);for(const o in coords){if(!s){var e=!1,t=!1;const s=$(".category-selector .specific");for(const i in s){const n=$(s[i]).attr("keywords").split(" ");for(const a in n)if(console.log(`Testing ${n[a].toLowerCase()} for ${coords[o].categories.toLowerCase()}`),coords[o].categories.toLowerCase().indexOf(n[a].toLowerCase())!==-1&&(t=!0,$(s[i]).attr("data-active")=="true")){e=!0;break}if(e)break}if(kind&&coords[o].categories.indexOf("Kind")!==-1&&(e=!0),haushalt&&coords[o].categories.indexOf("Haushalt")!==-1&&(e=!0),troedel&&coords[o].categories.indexOf("Tr√∂del")!==-1&&(e=!0),n&&!t&&(console.log(coords[o].categories),e=!0),!e)continue}coords[o].icon?markers.push(L.marker(coords[o].coord,{icon:L.AwesomeMarkers.icon(coords[o].icon)}).addTo(map).bindPopup(coords[o].text)):markers.push(L.marker(coords[o].coord).addTo(map).bindPopup(coords[o].text))}}(function(e){"use strict";e(window).on("load",async function(){e(".preloader").fadeOut(100),map=L.map("location_map").setView([52.1283,7.5501],13),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(map),coords=await(await fetch("/coords.json")).json(),redrawMarkers(),L.marker([52.12897,7.55076],{icon:L.AwesomeMarkers.icon({icon:"place-of-worship",prefix:"fa",markerColor:"darkred"}),zIndexOffset:1e3}).addTo(map).bindPopup("Dorfplatz Reckenfeld<br>23 St&auml;nde");const t=e("#list-all");for(const s in coords){const n=e('<div class="stand">');t.append(n);const o=e("<div class='addr'>");e(n).append(o),e(o).text(coords[s].address);const i=e("<div class='categories'>");e(n).append(i),e(i).text(coords[s].categories)}}),e(".category-selector").on("click",t=>{e(t.target).attr("data-active")=="true"?(e(t.target).attr("id")!=="category-all"&&e("#category-all").attr("data-active","false"),e(t.target).attr("id")==="category-all"&&e(".category-selector").attr("data-active","false"),e(t.target).attr("data-active","false")):(e(t.target).attr("data-active","true"),e(t.target).attr("id")==="category-all"&&e(".category-selector").attr("data-active","true")),redrawMarkers()});function t(){var t;e(".count").length!==0&&(t=e(".count").offset().top-window.innerHeight),e(window).scrollTop()>t&&e(".count").each(function(){var t=e(this),n=t.attr("data-count");e({countNum:t.text()}).animate({countNum:n},{duration:1e3,easing:"swing",step:function(){t.text(Math.floor(this.countNum))},complete:function(){t.text(this.countNum)}})})}e(window).on("scroll",t);function n(){e('a[href*="#"]').not('[href="#"]').not('[href="#0"]').on("click",function(t){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var n=e(this.hash),n=n.length?n:e("[name="+this.hash.slice(1)+"]");n.length&&(t.preventDefault(),e("html, body").animate({scrollTop:n.offset().top},1e3,"easeInOutExpo",function(){var t=e(n);if(t.focus(),t.is(":focus"))return!1;t.attr("tabindex","-1"),t.focus()}))}}),jQuery.extend(jQuery.easing,{easeInOutExpo:function(e,t,n,s,o){return t==0?n:t==o?n+s:(t/=o/2)<1?s/2*Math.pow(2,10*(t-1))+n:s/2*(-Math.pow(2,-10*--t)+2)+n}})}(navigator.userAgent.indexOf("Opera Mini")==-1||navigator.userAgent.indexOf("UCBrowser")!=-1)&&n(),e("#burger").on("click",function(){e(".fullscreen-nav-container").slideToggle(300)}),e(".fullscreen-nav-holder a, .turn-home").on("click",function(){e("#burger").trigger("click")}),e(".menu-item").each(function(){const n=e(this).find("a").attr("href"),s=n.includes("#")?n.split("#")[0]:n,t=window.location.pathname,o=t.endsWith("/")&&t.length>1?t.substr(0,t.length-1):t;o===s&&this.classList.add("active")});function s(e){var t=document.getElementById(e).src;t.indexOf("logo-dark.svg")!=-1?document.getElementById(e).src="/img/logo-text.png":document.getElementById(e).src="/img/logo-text.png"}window.location.pathname==="/"?e(".about-me").waypoint({handler:function(t){e(".menu-container").toggleClass("menu-normal"),e(".menu-item").toggleClass("menu-item-transparent"),e(".desktop-menu .hvr-underline-from-left").toggleClass("dark"),e(".mobile-menu").toggleClass("mobile-menu-fix");var n=e(".menu-link").attr("class");t=="up"&&n=="menu-link active"&&e(".menu-link").trigger("click")},offset:e(".menu-container").innerHeight()+25}):(e(".menu-container").addClass("menu-normal"),e(".menu-item").addClass("menu-item-transparent"),e(".desktop-menu .hvr-underline-from-left").addClass("dark"),s("desktop-logo"),e(".mobile-menu").addClass("mobile-menu-fix")),e(".mobile-menu a.menu-link").on("click",function(){e(".menu-link").toggleClass("active"),e(".menu-slider").slideToggle(500)}),navigator.userAgent.indexOf("Opera Mini")!=-1&&(work.start(),happyClient.start(),projects.start(),coffee.start(),e(".skillbar").each(function(){e(this).find(".skillbar-bar").animate({width:jQuery(this).attr("data-percent")},0)}),e("input").removeClass("form-control"),e("input").css({width:"100%",height:"50px",background:"#fff"}),e(".navigation-icon").css("display","none")),navigator.userAgent.indexOf("UCBrowser")!=-1&&(e(".navigation-icon").css("display","none"),e(".fun-facts").css({display:"table",margin:"auto"}),work.start(),happyClient.start(),projects.start(),coffee.start(),e(".skillbar").each(function(){e(this).find(".skillbar-bar").animate({width:jQuery(this).attr("data-percent")},0)})),(navigator.appName=="Microsoft Internet Explorer"||!!(navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/rv:11/))||typeof e.browser!="undefined"&&e.browser.msie==1)&&(e(".header, .fullscreen-nav-container, .like-me, .contact").css("background-attachment","scroll"),e(".fullscreen-nav-holder").css("width","100vw")),e("#current-year").html((new Date).getFullYear())})(jQuery)